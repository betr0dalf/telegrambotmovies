<!DOCTYPE html>

<html lang="ru" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>telegram_bot.main &#8212; документация MovieBot 1.0</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=27fed22d" />
    <script src="../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../_static/documentation_options.js?v=9ca2116e"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=cd1d70c9"></script>
    <link rel="index" title="Алфавитный указатель" href="../../genindex.html" />
    <link rel="search" title="Поиск" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Исходный код telegram_bot.main</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Основной модуль Telegram-бота для просмотра фильмов и сериалов.</span>

<span class="sd">Бот предоставляет следующие функции:</span>
<span class="sd">- Поиск фильмов по названию</span>
<span class="sd">- Топ фильмов по жанру</span>
<span class="sd">- Топ фильмов за год</span>
<span class="sd">- Топ фильмов режиссера</span>
<span class="sd">- Топ фильмов актера</span>
<span class="sd">- Подробная информация о фильме</span>

<span class="sd">Для работы требуется:</span>
<span class="sd">- API-токен Telegram бота</span>
<span class="sd">- Файл с данными о фильмах (MovieData.csv)</span>
<span class="sd">- Модуль background для поддержания работы бота</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">telebot</span>
<span class="kn">from</span> <span class="nn">telebot</span> <span class="kn">import</span> <span class="n">types</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="c1">#from background import keep_alive</span>
<span class="kn">from</span> <span class="nn">telegram_bot.background</span> <span class="kn">import</span> <span class="n">keep_alive</span>

<div class="viewcode-block" id="MovieBot">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot">[документация]</a>
<span class="k">class</span> <span class="nc">MovieBot</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Класс для управления Telegram-ботом поиска фильмов.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        bot (telebot.TeleBot): Экземпляр Telegram бота</span>
<span class="sd">        movies (pd.DataFrame): Данные о фильмах</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="MovieBot.__init__">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot.__init__">[документация]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;MovieData.csv&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Инициализация бота.</span>

<span class="sd">        :param token: API-токен Telegram бота</span>
<span class="sd">        :type token: str</span>
<span class="sd">        :param data_file: Путь к файлу с данными о фильмах</span>
<span class="sd">        :type data_file: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bot</span> <span class="o">=</span> <span class="n">telebot</span><span class="o">.</span><span class="n">TeleBot</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_movie_data</span><span class="p">(</span><span class="n">data_file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_handlers</span><span class="p">()</span></div>


<div class="viewcode-block" id="MovieBot.load_movie_data">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot.load_movie_data">[документация]</a>
    <span class="k">def</span> <span class="nf">load_movie_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Загружает и обрабатывает данные о фильмах.</span>

<span class="sd">        :param data_file: Путь к CSV файлу с данными</span>
<span class="sd">        :type data_file: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">movies</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_file</span><span class="p">)</span>
        <span class="c1"># Обработка данных</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;ratingKP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;ratingKP&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;ratingImdb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;ratingImdb&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span></div>


<div class="viewcode-block" id="MovieBot.setup_handlers">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot.setup_handlers">[документация]</a>
    <span class="k">def</span> <span class="nf">setup_handlers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Настройка обработчиков команд бота.&quot;&quot;&quot;</span>

        <span class="nd">@self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">message_handler</span><span class="p">(</span><span class="n">commands</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;start&#39;</span><span class="p">])</span>
        <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="nd">@self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">message_handler</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">message</span><span class="p">:</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">handle_all_messages</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="nd">@self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">callback_query_handler</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">call</span><span class="p">:</span> <span class="n">call</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;movie_&#39;</span><span class="p">))</span>
        <span class="k">def</span> <span class="nf">callback_movie_details</span><span class="p">(</span><span class="n">call</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle_movie_callback</span><span class="p">(</span><span class="n">call</span><span class="p">)</span></div>


<div class="viewcode-block" id="MovieBot.show_main_menu">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot.show_main_menu">[документация]</a>
    <span class="k">def</span> <span class="nf">show_main_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Показывает главное меню бота.</span>

<span class="sd">        :param message: Объект сообщения Telegram</span>
<span class="sd">        :type message: telebot.types.Message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">markup</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">ReplyKeyboardMarkup</span><span class="p">(</span><span class="n">resize_keyboard</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">button1</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">KeyboardButton</span><span class="p">(</span><span class="s1">&#39;Искать фильм 🍿&#39;</span><span class="p">)</span>
        <span class="n">button2</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">KeyboardButton</span><span class="p">(</span><span class="s1">&#39;Топ фильмов по жанру 🎥&#39;</span><span class="p">)</span>
        <span class="n">button3</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">KeyboardButton</span><span class="p">(</span><span class="s1">&#39;Топ фильмы за год 🔥&#39;</span><span class="p">)</span>
        <span class="n">button4</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">KeyboardButton</span><span class="p">(</span><span class="s1">&#39;Топ фильмы режиссера 🎬&#39;</span><span class="p">)</span>
        <span class="n">button5</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">KeyboardButton</span><span class="p">(</span><span class="s1">&#39;Топ фильмы актёра 🌟&#39;</span><span class="p">)</span>
        <span class="n">markup</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="n">button1</span><span class="p">)</span>
        <span class="n">markup</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="n">button2</span><span class="p">,</span> <span class="n">button3</span><span class="p">)</span>
        <span class="n">markup</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="n">button4</span><span class="p">,</span> <span class="n">button5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                              <span class="s1">&#39;Выберите действие:&#39;</span><span class="p">,</span>
                              <span class="n">reply_markup</span><span class="o">=</span><span class="n">markup</span><span class="p">)</span></div>


<div class="viewcode-block" id="MovieBot.on_click">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot.on_click">[документация]</a>
    <span class="k">def</span> <span class="nf">on_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Обрабатывает выбор действия из главного меню.</span>

<span class="sd">        :param message: Объект сообщения Telegram</span>
<span class="sd">        :type message: telebot.types.Message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">message</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s1">&#39;Искать фильм 🍿&#39;</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="s1">&#39;Введите название фильма:&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">register_next_step_handler</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_movie</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">message</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s1">&#39;Топ фильмов по жанру 🎥&#39;</span><span class="p">:</span>
                <span class="n">genres</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;Genres&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">eval</span><span class="p">)</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
                <span class="n">markup</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">ReplyKeyboardMarkup</span><span class="p">(</span><span class="n">resize_keyboard</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">genre</span> <span class="ow">in</span> <span class="n">genres</span><span class="p">:</span>
                    <span class="n">markup</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">KeyboardButton</span><span class="p">(</span><span class="n">genre</span><span class="p">))</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                            <span class="s1">&#39;Выберите жанр:&#39;</span><span class="p">,</span>
                                            <span class="n">reply_markup</span><span class="o">=</span><span class="n">markup</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">register_next_step_handler</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_genre</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">message</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s1">&#39;Топ фильмы за год 🔥&#39;</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                            <span class="s1">&#39;Введите год выхода фильмов:&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">register_next_step_handler</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_year</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">message</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s1">&#39;Топ фильмы режиссера 🎬&#39;</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="s1">&#39;Введите имя режиссёра:&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">register_next_step_handler</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_director</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">message</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s1">&#39;Топ фильмы актёра 🌟&#39;</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="s1">&#39;Введите имя актёра:&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">register_next_step_handler</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_actor</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                      <span class="s1">&#39;Нажмите на любую из кнопок внизу экрана 👁️👄👁️&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Произошла ошибка: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></div>


    <span class="c1"># Все остальные методы с аналогичной документацией...</span>
    <span class="c1"># Привожу их в сокращенном виде, но с сохранением структуры</span>

<div class="viewcode-block" id="MovieBot.get_year">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot.get_year">[документация]</a>
    <span class="k">def</span> <span class="nf">get_year</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Обрабатывает ввод года пользователем и показывает топ фильмов за этот год.</span>

<span class="sd">        :param message: Объект сообщения с введенным годом</span>
<span class="sd">        :type message: telebot.types.Message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">year</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">top_movies_by_year</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                  <span class="s1">&#39;Пожалуйста, введите корректный год (например: 2020).&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></div>


<div class="viewcode-block" id="MovieBot.get_director">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot.get_director">[документация]</a>
    <span class="k">def</span> <span class="nf">get_director</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Обрабатывает ввод имени режиссера и показывает топ его фильмов.</span>

<span class="sd">        :param message: Объект сообщения с именем режиссера</span>
<span class="sd">        :type message: telebot.types.Message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">director</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">text</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">director</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                  <span class="s1">&#39;Имя режиссера должно содержать минимум 2 символа.&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">top_movies_by_director</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">director</span><span class="p">)</span></div>


<div class="viewcode-block" id="MovieBot.get_actor">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot.get_actor">[документация]</a>
    <span class="k">def</span> <span class="nf">get_actor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Обрабатывает ввод имени актера и показывает топ фильмов с его участием.</span>

<span class="sd">        :param message: Объект сообщения с именем актера</span>
<span class="sd">        :type message: telebot.types.Message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actor</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">text</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">actor</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                  <span class="s1">&#39;Имя актера должно содержать минимум 2 символа.&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">top_movies_by_actor</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">actor</span><span class="p">)</span></div>


<div class="viewcode-block" id="MovieBot.search_movie">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot.search_movie">[документация]</a>
    <span class="k">def</span> <span class="nf">search_movie</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Обрабатывает поиск фильма по названию.</span>

<span class="sd">        :param message: Объект сообщения с названием фильма</span>
<span class="sd">        :type message: telebot.types.Message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">movie_name</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">movie_name</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                  <span class="s1">&#39;Название фильма должно содержать минимум 2 символа.&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">found_movies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;NameFilm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">movie_name</span><span class="p">,</span> <span class="n">case</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="n">found_movies</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                        <span class="s1">&#39;Фильм не найден. Попробуйте ещё раз:&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">register_next_step_handler</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_movie</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">movie</span> <span class="o">=</span> <span class="n">found_movies</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_movie_details</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">movie</span><span class="p">)</span></div>


<div class="viewcode-block" id="MovieBot.select_genre">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot.select_genre">[документация]</a>
    <span class="k">def</span> <span class="nf">select_genre</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Обрабатывает выбор жанра пользователем.</span>

<span class="sd">        :param message: Объект сообщения с выбранным жанром</span>
<span class="sd">        :type message: telebot.types.Message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">genre</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">text</span>
        <span class="k">if</span> <span class="n">genre</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;Genres&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">eval</span><span class="p">)</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                  <span class="s1">&#39;Пожалуйста, выберите жанр из предложенных.&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">top_movies_by_genre</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">genre</span><span class="p">)</span></div>


<div class="viewcode-block" id="MovieBot.top_movies_by_genre">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot.top_movies_by_genre">[документация]</a>
    <span class="k">def</span> <span class="nf">top_movies_by_genre</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">genre</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Показывает топ 10 фильмов по выбранному жанру.</span>

<span class="sd">        :param message: Объект исходного сообщения</span>
<span class="sd">        :type message: telebot.types.Message</span>
<span class="sd">        :param genre: Выбранный жанр</span>
<span class="sd">        :type genre: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">genre_movies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;Genres&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">genre</span> <span class="ow">in</span> <span class="nb">eval</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="p">]</span>
            <span class="n">top_movies</span> <span class="o">=</span> <span class="n">genre_movies</span><span class="o">.</span><span class="n">nlargest</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;ratingKP&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">top_movies</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                      <span class="sa">f</span><span class="s1">&#39;Фильмы жанра &quot;</span><span class="si">{</span><span class="n">genre</span><span class="si">}</span><span class="s1">&quot; не найдены.&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send_top_movies</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">top_movies</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;жанру &quot;</span><span class="si">{</span><span class="n">genre</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                  <span class="sa">f</span><span class="s1">&#39;Произошла ошибка при поиске по жанру: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></div>


<div class="viewcode-block" id="MovieBot.top_movies_by_year">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot.top_movies_by_year">[документация]</a>
    <span class="k">def</span> <span class="nf">top_movies_by_year</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">year</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Показывает топ 10 фильмов за указанный год.</span>

<span class="sd">        :param message: Объект исходного сообщения</span>
<span class="sd">        :type message: telebot.types.Message</span>
<span class="sd">        :param year: Год выпуска фильмов</span>
<span class="sd">        :type year: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">current_year</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">year</span>
            <span class="k">if</span> <span class="n">year</span> <span class="o">&lt;</span> <span class="mi">1900</span> <span class="ow">or</span> <span class="n">year</span> <span class="o">&gt;</span> <span class="n">current_year</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                      <span class="sa">f</span><span class="s1">&#39;Пожалуйста, введите год между 1900 и </span><span class="si">{</span><span class="n">current_year</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="n">year_movies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">year</span><span class="p">]</span>
            <span class="n">top_movies</span> <span class="o">=</span> <span class="n">year_movies</span><span class="o">.</span><span class="n">nlargest</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;ratingKP&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">top_movies</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                      <span class="sa">f</span><span class="s1">&#39;Фильмы за </span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1"> год не найдены.&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send_top_movies</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">top_movies</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1"> году&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                  <span class="sa">f</span><span class="s1">&#39;Произошла ошибка при поиске по году: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></div>


<div class="viewcode-block" id="MovieBot.top_movies_by_director">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot.top_movies_by_director">[документация]</a>
    <span class="k">def</span> <span class="nf">top_movies_by_director</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">director</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Показывает топ 10 фильмов указанного режиссера.</span>

<span class="sd">        :param message: Объект исходного сообщения</span>
<span class="sd">        :type message: telebot.types.Message</span>
<span class="sd">        :param director: Имя режиссера</span>
<span class="sd">        :type director: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">director_movies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;Directors&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">director</span><span class="p">,</span> <span class="n">case</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="n">top_movies</span> <span class="o">=</span> <span class="n">director_movies</span><span class="o">.</span><span class="n">nlargest</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;ratingKP&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">top_movies</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                      <span class="sa">f</span><span class="s1">&#39;Фильмы режиссера </span><span class="si">{</span><span class="n">director</span><span class="si">}</span><span class="s1"> не найдены.&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send_top_movies</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">top_movies</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;режиссеру </span><span class="si">{</span><span class="n">director</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                  <span class="sa">f</span><span class="s1">&#39;Произошла ошибка при поиске по режиссеру: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></div>


<div class="viewcode-block" id="MovieBot.top_movies_by_actor">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot.top_movies_by_actor">[документация]</a>
    <span class="k">def</span> <span class="nf">top_movies_by_actor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">actor</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Показывает топ 10 фильмов с указанным актером.</span>

<span class="sd">        :param message: Объект исходного сообщения</span>
<span class="sd">        :type message: telebot.types.Message</span>
<span class="sd">        :param actor: Имя актера</span>
<span class="sd">        :type actor: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">actor_movies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;Actors&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">actor</span><span class="p">,</span> <span class="n">case</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="n">top_movies</span> <span class="o">=</span> <span class="n">actor_movies</span><span class="o">.</span><span class="n">nlargest</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;ratingKP&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">top_movies</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                      <span class="sa">f</span><span class="s1">&#39;Фильмы с актером </span><span class="si">{</span><span class="n">actor</span><span class="si">}</span><span class="s1"> не найдены.&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send_top_movies</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">top_movies</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;актеру </span><span class="si">{</span><span class="n">actor</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                  <span class="sa">f</span><span class="s1">&#39;Произошла ошибка при поиске по актеру: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></div>


<div class="viewcode-block" id="MovieBot.send_top_movies">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot.send_top_movies">[документация]</a>
    <span class="k">def</span> <span class="nf">send_top_movies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">top_movies</span><span class="p">,</span> <span class="n">category</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Отправляет пользователю список топ фильмов с интерактивными кнопками.</span>

<span class="sd">        :param message: Объект исходного сообщения</span>
<span class="sd">        :type message: telebot.types.Message</span>
<span class="sd">        :param top_movies: DataFrame с фильмами</span>
<span class="sd">        :type top_movies: pd.DataFrame</span>
<span class="sd">        :param category: Категория поиска (для заголовка)</span>
<span class="sd">        :type category: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Формируем текст сообщения</span>
            <span class="n">movie_list</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;NameFilm&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">), ★ </span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;ratingKP&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">top_movies</span><span class="o">.</span><span class="n">iterrows</span><span class="p">())</span>
            <span class="p">])</span>

            <span class="c1"># Отправляем сообщение со списком</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
                <span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;🏆 Топ фильмов по </span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">:</span><span class="se">\n\n</span><span class="si">{</span><span class="n">movie_list</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">parse_mode</span><span class="o">=</span><span class="s1">&#39;Markdown&#39;</span>
            <span class="p">)</span>

            <span class="c1"># Создаем интерактивные кнопки</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">InlineKeyboardMarkup</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">top_movies</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
                <span class="n">btn_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;NameFilm&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">)&quot;</span>
                <span class="n">markup</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">InlineKeyboardButton</span><span class="p">(</span>
                    <span class="n">btn_text</span><span class="p">,</span>
                    <span class="n">callback_data</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;movie_</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;KPid&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">))</span>

            <span class="c1"># Отправляем кнопки</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
                <span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s2">&quot;Выберите фильм для подробной информации:&quot;</span><span class="p">,</span>
                <span class="n">reply_markup</span><span class="o">=</span><span class="n">markup</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
                <span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s1">&#39;⚠️ Произошла ошибка при формировании списка фильмов.&#39;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></div>


<div class="viewcode-block" id="MovieBot.show_movie_details">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot.show_movie_details">[документация]</a>
    <span class="k">def</span> <span class="nf">show_movie_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">movie</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Отображает подробную информацию о фильме и интерактивные кнопки.</span>

<span class="sd">        :param message: Объект входящего сообщения от пользователя</span>
<span class="sd">        :type message: telebot.types.Message</span>
<span class="sd">        :param movie: Данные о фильме (строка DataFrame)</span>
<span class="sd">        :type movie: pandas.Series</span>

<span class="sd">        :raises KeyError: Если отсутствуют обязательные поля в данных фильма</span>
<span class="sd">        :raises Exception: При ошибках отправки сообщений или медиа</span>

<span class="sd">        .. note::</span>
<span class="sd">            Обязательные поля в данных фильма:</span>
<span class="sd">            - NameFilm: Название фильма</span>
<span class="sd">            - Year: Год выпуска</span>
<span class="sd">            - ratingKP: Рейтинг Кинопоиска</span>
<span class="sd">            - Description: Описание фильма</span>
<span class="sd">            - PosterUrl: URL постера</span>
<span class="sd">            - WebUrl: URL для просмотра</span>
<span class="sd">            - WebUrl2: URL страницы на Кинопоиске</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Формируем основное сообщение</span>
            <span class="n">msg_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;🎬 *</span><span class="si">{</span><span class="n">movie</span><span class="p">[</span><span class="s1">&#39;NameFilm&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">* (</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">movie</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">)</span><span class="se">\n\n</span><span class="s2">&quot;</span>
            <span class="n">msg_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;📝 *Описание:*</span><span class="se">\n</span><span class="si">{</span><span class="n">movie</span><span class="p">[</span><span class="s1">&#39;Description&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
            <span class="n">msg_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;📊 *Рейтинг КП:* </span><span class="si">{</span><span class="n">movie</span><span class="p">[</span><span class="s1">&#39;ratingKP&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">msg_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;⭐ *IMDb:* </span><span class="si">{</span><span class="n">movie</span><span class="p">[</span><span class="s1">&#39;ratingImdb&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>

            <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">notna</span><span class="p">(</span><span class="n">movie</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;filmLength&#39;</span><span class="p">)):</span>
                <span class="n">msg_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;⏳ *Длительность:* </span><span class="si">{</span><span class="n">movie</span><span class="p">[</span><span class="s1">&#39;filmLength&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> мин.</span><span class="se">\n</span><span class="s2">&quot;</span>

            <span class="c1"># Отправляем текстовую информацию</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">msg_text</span><span class="p">,</span> <span class="n">parse_mode</span><span class="o">=</span><span class="s1">&#39;Markdown&#39;</span><span class="p">)</span>

            <span class="c1"># Отправка постера с обработкой ошибок</span>
            <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">notna</span><span class="p">(</span><span class="n">movie</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;PosterUrl&#39;</span><span class="p">)):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_photo</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">movie</span><span class="p">[</span><span class="s1">&#39;PosterUrl&#39;</span><span class="p">])</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Ошибка отправки постера: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="s2">&quot;🖼 Изображение недоступно&quot;</span><span class="p">)</span>

            <span class="c1"># Создаем кнопки действий</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">InlineKeyboardMarkup</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">notna</span><span class="p">(</span><span class="n">movie</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;WebUrl&#39;</span><span class="p">)):</span>
                <span class="n">markup</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">InlineKeyboardButton</span><span class="p">(</span>
                    <span class="s1">&#39;🎥 Смотреть онлайн&#39;</span><span class="p">,</span>
                    <span class="n">url</span><span class="o">=</span><span class="n">movie</span><span class="p">[</span><span class="s1">&#39;WebUrl&#39;</span><span class="p">]</span>
                <span class="p">))</span>

            <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">notna</span><span class="p">(</span><span class="n">movie</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;WebUrl2&#39;</span><span class="p">)):</span>
                <span class="n">markup</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">InlineKeyboardButton</span><span class="p">(</span>
                    <span class="s1">&#39;📌 КиноПоиск&#39;</span><span class="p">,</span>
                    <span class="n">url</span><span class="o">=</span><span class="n">movie</span><span class="p">[</span><span class="s1">&#39;WebUrl2&#39;</span><span class="p">]</span>
                <span class="p">))</span>

            <span class="k">if</span> <span class="n">markup</span><span class="o">.</span><span class="n">keyboard</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
                    <span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="s2">&quot;🔗 Ссылки:&quot;</span><span class="p">,</span>
                    <span class="n">reply_markup</span><span class="o">=</span><span class="n">markup</span>
                <span class="p">)</span>

        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;⚠️ Отсутствует обязательное поле: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[ERROR] </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="se">\n</span><span class="s2">Доступные поля: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">movie</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
                <span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s2">&quot;⚠️ Произошла ошибка при загрузке информации о фильме&quot;</span>
            <span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[ERROR] show_movie_details: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></div>


<div class="viewcode-block" id="MovieBot.handle_movie_callback">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.MovieBot.handle_movie_callback">[документация]</a>
    <span class="k">def</span> <span class="nf">handle_movie_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Обрабатывает callback от интерактивных кнопок выбора фильма.</span>

<span class="sd">        :param call: Объект callback</span>
<span class="sd">        :type call: telebot.types.CallbackQuery</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">movie_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">call</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">movie</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;KPid&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">movie_id</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_movie_details</span><span class="p">(</span><span class="n">call</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">movie</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
                <span class="n">call</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s1">&#39;⚠️ Фильм не найден в базе данных.&#39;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">call</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
                <span class="n">call</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s1">&#39;⚠️ Произошла ошибка при загрузке фильма.&#39;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">(</span><span class="n">call</span><span class="o">.</span><span class="n">message</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="run_bot">
<a class="viewcode-back" href="../../telegram_bot.html#telegram_bot.main.run_bot">[документация]</a>
<span class="k">def</span> <span class="nf">run_bot</span><span class="p">(</span><span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Запускает бота с указанным токеном.</span>

<span class="sd">    :param token: API-токен Telegram бота</span>
<span class="sd">    :type token: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">keep_alive</span><span class="p">()</span>  <span class="c1"># Активируем фоновый сервис</span>
    <span class="n">movie_bot</span> <span class="o">=</span> <span class="n">MovieBot</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>

    <span class="c1"># Бесконечный цикл для обработки переподключений</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">movie_bot</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">polling</span><span class="p">(</span><span class="n">none_stop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Ошибка: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>



<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c1"># Токен бота</span>
    <span class="n">BOT_TOKEN</span> <span class="o">=</span> <span class="s1">&#39;7606959553:AAGS4AwiHLHoafx_vuKOxB4mPW1SPSLSTKY&#39;</span>
    <span class="n">run_bot</span><span class="p">(</span><span class="n">BOT_TOKEN</span><span class="p">)</span>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">MovieBot</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Искать" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Навигация</h3>
<p class="caption" role="heading"><span class="caption-text">Содержание:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">Все модули проекта</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../parser.html">Parser Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Petrparser.html">Petrparser Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../telegram_bot.html">Telegram Bot Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../background.html">Background Service</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Код модуля</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Novikov D.V., Polyakova V.V, Prepelitsa P.P..
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
    </div>

    

    
  </body>
</html>